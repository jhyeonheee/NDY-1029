<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NDY</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="stylesheet" href="lib/fullpage.css">
    <link rel="stylesheet" href="css/test2.css">

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="lib/fullpage.js"></script>

    <script>
        window.onload = () => {
            const img = document.querySelector('.container.bg .image');
            const body = document.body;
            let step = 0; // 0: 기본, 1: 확대 중, 2: fullpage 전환 가능
            let firstScrollDone = false;

            // ✅ fullpage 설정
            new fullpage('#fullpage', {
                autoScrolling: true,
                fitToSection: true,
                scrollBar: false,
                scrollingSpeed: 1000,
                responsiveWidth: 768,
                onLeave: (origin, destination) => {
                    if (destination.index === 1) {
                        step = 2;
                        img.classList.remove('image--scaled');
                        body.classList.remove('scaled');
                    }
                    if (destination.index === 0) {
                        step = 0;
                    }
                },
                afterRender() {
                    // ✅ 첫 연출 전까지는 스크롤 막아둠
                    fullpage_api.setAllowScrolling(false);
                },
            });

            // ✅ 휠 제어 (처음 한 번만)
            window.addEventListener('wheel', (e) => {
                // fullpage에 제어 넘기기 전까진 우리가 컨트롤
                if (firstScrollDone) return;

                if (e.deltaY > 0 && step === 0) {
                    e.preventDefault();              // 첫 휠은 우리가 먹고
                    step = 1;

                    img.classList.add('image--scaled');
                    body.classList.add('scaled');

                    setTimeout(() => {
                        // ✅ 자동 이동 없음! 그냥 스크롤만 풀어줌
                        fullpage_api.setAllowScrolling(true);
                        firstScrollDone = true;        // 다음 휠부터 fullpage가 섹션 이동 처리
                    }, 1200); // 이미지 확대 시간과 맞춰서
                }
            }, { passive: false });/*  */

            // ✅ Swiper 슬라이드
            new Swiper(".mainVisual", {
                loop: true,
                autoplay: { delay: 4000, disableOnInteraction: false },
                speed: 1000,
                effect: 'fade',
            }); //section02 end
        }; //script end
    </script>
</head>

<body>
    <div id="wrap">
        <header class="header">
            <div class="inner">
                <h1 class="logo">
                    <a href="#">
                        <img src="img/logo_ndy(white).png" alt="">
                    </a>
                </h1><!-- .logo end -->

                <nav class="nav">
                    <ul class="gnb">

                        <li>
                            <a href="#" class="depth-01">ABOUT</a>
                        </li>

                        <li>
                            <a href="#" class="depth-01">25FW</a>
                        </li>

                        <li>
                            <a href="#" class="depth-01">CELEBRITY</a>
                        </li>

                        <li>
                            <a href="#" class="depth-01">STYLING</a>
                        </li>

                        <li>
                            <a href="#" class="depth-01">베스트</a>
                        </li>

                        <li>
                            <a href="#" class="depth-01">의류</a>
                            <ul class="depth-02">
                                <li><a href="#">전체</a></li>
                                <li><a href="#">상의</a></li>
                                <li><a href="#">하의</a></li>
                                <li><a href="#">아우터</a></li>
                                <li><a href="#">세트</a></li>
                                <li><a href="#">맞춤 제품찾기 </a></li>
                            </ul><!-- .depth-02 end -->
                        </li>

                        <li>
                            <a href="#" class="depth-01">신발</a>
                            <ul class="depth-02">
                                <li><a href="#">전체</a></li>
                                <li><a href="#">운동화</a></li>
                                <li><a href="#">슬라이드</a></li>
                            </ul><!-- .depth-02 end -->
                        </li>

                        <li>
                            <a href="#" class="depth-01">액세서리</a>
                            <ul class="depth-02">
                                <li><a href="#">전체</a></li>
                                <li><a href="#">가방</a></li>
                                <li><a href="#">백팩</a></li>
                                <li><a href="#">모자</a></li>
                            </ul><!-- .depth-02 end -->
                        </li>

                        <li>
                            <a href="#" class="depth-01">커뮤니티</a>
                            <ul class="depth-02">
                                <li><a href="#">대량구매</a></li>
                                <li><a href="#">리뷰이벤트</a></li>
                                <li><a href="#">회원혜택</a></li>
                                <li><a href="#">공지사항</a></li>
                                <li><a href="#">Q&A</a></li>
                                <li><a href="#">FAQ</a></li>
                                <li><a href="#">매장안내</a></li>
                                <li><a href="#">GLOBAL</a></li>
                            </ul><!-- .depth-02 end -->
                        </li>
                    </ul><!-- .gnb end -->
                </nav><!-- .nav end -->

                <ul class="utill">
                    <li><a href="#">로그인</a></li>
                    <li><a href="#">회원가입</a></li>
                    <li><a href="#"><img src="img/icon/shoppingBag (2).svg" alt=""></a></li>
                    <li><a href="#"><img src="img/icon/Search.svg " alt=""></a></li>
                </ul><!-- .utill end -->
            </div><!-- .inner end -->
        </header><!-- .header end -->

        <main class="main">
            <div id="fullpage">
                <section class="section section01">
                    <div class="inner">
                        <div class="container bg">
                            <div class="text">
                                <p>DEFINE</p>
                                <img src="img/heropage(1).jpg" alt="" class="image">
                            </div><!-- .text end -->
                        </div><!-- .container bg end -->

                        <div class="container">
                            <div class="text">
                                <p>NOTHING.</p>
                                <img src="img/heropage(5).jpg" alt="" class="image">
                            </div><!-- .text end -->
                        </div><!-- .container end -->

                        <div class="container">
                            <div class="text">
                                <p>BE</p>
                                <img src="img/heropage(3).jpg" alt="" class="image">
                            </div><!-- .text end -->
                        </div><!-- .container end -->

                        <div class="container">
                            <div class="text">
                                <p>EVERYTHING</p>
                                <img src="img/heropage(6).jpg" alt="" class="image">
                            </div><!-- .text end -->
                        </div><!-- .container end -->

                    </div><!-- .inner end -->

                    <section class="overlay">
                        <div class="inner">
                            <p>Launched in 2017, NDY is a unisex brand rooted in a sporty and casual aesthetic.<br />
                                The name ‘NDY’ is short for Not Defined Yet, inspired by the idea that in a
                                fast-changing
                                trend
                                cycle,<br />what truly matters is not fixed definitions but infinite possibilities.</p>
                        </div><!-- .inner end -->
                    </section><!-- .overlay end -->
                </section><!-- .section01 end -->

                <section class="section section02">
                    <div class="swiper mainVisual">
                        <div class="swiper-wrapper">

                            <div class="swiper-slide">
                                <img src="img/Visual(2).jpg" alt="">
                                <div class="text">
                                    <p>엔디와이 악세사리</p>
                                    <h3>NDY ACC </h3>
                                </div><!-- .text end -->
                            </div><!-- swiper-slide end -->

                            <div class="swiper-slide">
                                <img src="img/Visual(1).jpg" alt="">
                                <div class="text">
                                    <p>엔디와이 세트</p>
                                    <h3>NDY SET </h3>
                                </div><!-- .text end -->
                            </div><!-- swiper-slide end -->
                        </div><!-- .swiper-wrapper end -->
                    </div><!-- .mainVisual end -->
                </section><!-- .section02 end -->
            </div><!-- FULLPAGE -->
        </main><!-- .main end -->

    </div><!-- .wrap end -->
</body>

</html>